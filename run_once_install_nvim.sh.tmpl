#!/bin/bash
set -euo pipefail

# Variables
URL="https://github.com/neovim/neovim/releases/download/nightly/nvim-linux-x86_64.tar.gz"
TARBALL="/tmp/nvim-linux-x86_64.tar.gz"
INSTALL_DIR="$HOME/.local/nvim-nightly"
BIN_DIR="$HOME/.local/bin"

# Download
echo "ðŸ“¥ Downloading Neovim..."
curl -L -o "$TARBALL" "$URL"

# Extract
echo "ðŸ“¦ Extracting..."
tar -xzf "$TARBALL" -C /tmp

# Move to install directory
echo "ðŸ“‚ Installing to $INSTALL_DIR..."
rm -rf "$INSTALL_DIR"
mv /tmp/nvim-linux-x86_64 "$INSTALL_DIR"

# Ensure bin directory exists
mkdir -p "$BIN_DIR"

# Symlink binary
ln -sf "$INSTALL_DIR/bin/nvim" "$BIN_DIR/nvim"

echo "âœ… Neovim installed successfully to $INSTALL_DIR"
